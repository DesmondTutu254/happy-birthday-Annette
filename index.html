<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To My Love, Annette Njeri - Happy Birthday</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

    <!-- CSS -->
    <style>
      body {
        font-family: "Lato", sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #f0f4f8 0%, #dde6ed 100%);
        color: #33415c;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        min-height: 100vh;
        text-align: center;
        overflow-x: hidden;
        position: relative;
      }

      #background-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: none;
        opacity: 0.6;
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        padding: 3em;
        margin: 2em 1em;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(51, 65, 92, 0.25);
        max-width: 800px;
        width: 90%;
        border: 3px solid #ffd1dc;
        position: relative;
        z-index: 10;
        animation: fadeInScale 2s ease-out;
        transition: transform 0.3s ease;
      }
      .card:hover {
        transform: translateY(-5px);
      }

      h1 {
        font-family: "Playfair Display", serif;
        font-size: clamp(2.5em, 6vw, 4.5em);
        margin-bottom: 0.1em;
        color: #e91e63;
        letter-spacing: 3px;
        font-weight: 700;
        line-height: 1.1;
      }

      h2 {
        font-family: "Playfair Display", serif;
        font-size: clamp(1.2em, 3.5vw, 1.8em);
        font-style: italic;
        color: #880e4f;
        margin-top: 0.5em;
        margin-bottom: 2.5em;
        font-weight: 400;
      }

      p {
        font-size: clamp(1.1em, 2vw, 1.4em);
        line-height: 1.8;
        margin-bottom: 2.2em;
        font-weight: 400;
        color: #4a148c;
      }

      strong {
        color: #c2185b;
        font-weight: 700;
      }

      #music-prompt {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #e91e63;
        color: white;
        padding: 12px 25px;
        border-radius: 50px;
        font-size: 1.1em;
        cursor: pointer;
        z-index: 20;
        opacity: 0.9;
        transition: all 0.4s ease;
        box-shadow: 0 4px 15px rgba(233, 30, 99, 0.6);
        display: flex;
        align-items: center;
      }
      #music-prompt:hover {
        opacity: 1;
        transform: scale(1.05) rotate(2deg);
        background: #c2185b;
      }
      .music-icon {
        margin-right: 10px;
        font-size: 1.3em;
        animation: pulse 1.5s infinite alternate;
      }
      @keyframes pulse {
        from {
          transform: scale(1);
        }
        to {
          transform: scale(1.15);
        }
      }

      .footer {
        font-family: "Playfair Display", serif;
        font-size: 1.2em;
        color: #5c7b9e;
        padding: 2em;
        margin-top: auto;
        z-index: 10;
        position: relative;
        animation: fadeIn 3s ease-out;
      }
      .footer strong {
        color: #880e4f;
      }

      @keyframes fadeInScale {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        .card {
          padding: 2em 1em;
        }
        h1 {
          letter-spacing: 1px;
        }
        #music-prompt {
          top: 15px;
          right: 15px;
          padding: 10px 18px;
          font-size: 0.9em;
        }
        .music-icon {
          margin-right: 5px;
          font-size: 1.1em;
        }
      }
    </style>
  </head>
  <body>
    <!-- Music -->
    <audio id="birthday-audio" loop>
      <source src="media/birthday-song.mp3" type="audio/mp3" />
      Your browser does not support the audio element.
    </audio>
    <div id="music-prompt" onclick="startMusic()">
      <span class="music-icon">üéµ</span> Play Melody
    </div>

    <!-- Background Canvas -->
    <canvas id="background-canvas"></canvas>

    <!-- Main Card -->
    <main class="card">
      <h1>Happy Birthday Baby ‚ù§</h1>
      <h2>To the one who painted my world in colours I never knew existed.</h2>

      <p>
        My dearest Annette, My Njeri,<br />
        On this beautiful day, I find myself speechless, yet overflowing with
        love. Six months ago, my world gained its most brilliant star, a
        pharmacy student with a heart as profound as her intellect. Every moment
        since has been a symphony, a perfectly coded program to my computer
        science mind, but infinitely more beautiful.
      </p>

      <p>
        You have a way of seeing joy in the smallest things, of bringing comfort
        and understanding that transcends any logic. You are my compass, my
        confidante, my deepest laugh, and my quietest peace. You've taught me
        what it truly means to love, deeply and unconditionally.
      </p>

      <p>
        May your birthday be filled with all the magic and serenity you bring to
        my life. I love you beyond words, beyond measure, beyond all
        understanding. Here's to countless more memories, adventures, and quiet
        moments of being utterly ourselves, together.
      </p>

      <p>You are my forever.</p>
    </main>

    <!-- Footer -->
    <footer class="footer">
      With all my love, today and always, <br />
      <strong>Desmond</strong> <span style="color: #e91e63">&hearts;</span>
    </footer>

    <script>
      const audio = document.getElementById("birthday-audio");
      const prompt = document.getElementById("music-prompt");

      function startMusic() {
        audio
          .play()
          .then(() => {
            prompt.style.opacity = 0;
            prompt.style.pointerEvents = "none"; // Make it unclickable
            setTimeout(() => (prompt.style.display = "none"), 500);
          })
          .catch((error) => {
            console.warn(
              "Audio playback was blocked. Allowing manual retry.",
              error
            );
            prompt.innerHTML =
              "<span class='music-icon'>üé∂</span> Click again to play!";
            prompt.onclick = () => {
              audio.play();
              prompt.style.display = "none";
            };
          });
      }

      //Background
      const canvas = document.getElementById("background-canvas");
      const ctx = canvas.getContext("2d");
      let animation;

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        if (animation) {
          animation.pause();
        }
        createAnimation();
      }

      function createAnimation() {
        const colors = ["#FFD1DC", "#FFC0CB", "#FFB6C1", "#F7CAC9", "#F0F8F8"];
        const shapes = [];
        const numberOfShapes = 20;

        for (let i = 0; i < numberOfShapes; i++) {
          shapes.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            radius: Math.random() * 20 + 10,
            color: colors[Math.floor(Math.random() * colors.length)],
            opacity: 0,
          });
        }

        function draw() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          shapes.forEach((shape) => {
            ctx.beginPath();
            ctx.arc(shape.x, shape.y, shape.radius, 0, 2 * Math.PI);
            ctx.fillStyle = `rgba(${parseInt(
              shape.color.slice(1, 3),
              16
            )}, ${parseInt(shape.color.slice(3, 5), 16)}, ${parseInt(
              shape.color.slice(5, 7),
              16
            )}, ${shape.opacity})`;
            ctx.fill();
          });
        }

        // Anime.js
        animation = anime
          .timeline({
            targets: shapes,
            delay: anime.stagger(100),
            loop: true,
            easing: "easeInOutQuad",
            update: draw,
          })
          .add(
            {
              opacity: [0, 0.7],
              duration: 1500,
              scale: [0.5, 1],
              direction: "alternate",
            },
            0
          )
          .add(
            {
              x: (el) => anime.random(0, canvas.width),
              y: (el) => anime.random(0, canvas.height),
              radius: (el) => anime.random(15, 35),
              duration: 4000,
              direction: "alternate",
            },
            "-=1000"
          );
        draw();
      }

      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();
    </script>
  </body>
</html>
